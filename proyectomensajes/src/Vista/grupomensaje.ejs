<%- include("./Partes/Cabecera.ejs") %>
    <div class="container-fluid py-6 my-4 mt-0 " style="background: linear-gradient(rgba(0, 0, 0, .75), rgba(0, 0, 0, .75)), url(../img/FondoEscritorio55.png) center center no-repeat;
background-size: cover; " data-wow-delay="0.1s">
        <div class="container text-center">
            <h1 class="display-4 text-white animated slideInDown mb-4">Enviar Archivo de Mensajes</h1>
        </div>
    </div>
    <div class="container text-center">
        <div class="row  mt-2">
            <h1>Selecciona El Archivo De Texto</h1>
        </div>
    </div>

    <form action="/gruposms" method="POST" enctype="multipart/form-data" >
    <div class="container text-center p-5" style="margin-bottom: 100px;">        
            <div class="row">
                <input type="file" class="form-control" name="excelsms" accept=".txt">
            </div>
            <div class="row">
                <div class="form-group col m-2">                        
                    <p style="color:black">Seleccione chip de origen:</p>
                    <select id="puerto" name="puerto">
                        <option value="gsm-1" >gsm-1
                        <option value="gsm-2" >gsm-2
                        <option value="gsm-3" >gsm-3
                        <option value="gsm-4" selected>77487798</option>
                    </select>                        
                </div>                
            </div>                                    
                <div class="form-group row m-2" style="word-wrap: break-word;">   
                    <p style="color:black">Seleccione mensaje:</p>
                        <select id="mensaje" name="mensaje" cstyle="width:10px">
                            <%for(var i=0;i<mensajes.length;i++){%>
                                <option value="<%=mensajes[i]._id%>">
                                    <%=mensajes[i].Mensaje%>
                                </option>
                                <%}%>
                        </select>                        
                </div>
                <div class="form-group row m-2" style="word-wrap: break-word;">   
                    <p style="color:black">Ingresa Un Mensaje:</p> 
                    <p id="todo">NÃºmero de caracteres: <span id="counter" ></span></p>
                    <input type="text" id="caracter" class="form-control"  name="texto" maxlength="160" >                    
                </div>
            
            <div class="row">
                <button class="btn btn-dark w-100 py-3">Enviar Mensaje</button>
            </div>
        </form>
    </div>
    <script>
        var mensajeSelect = document.getElementById("mensaje")
        var mensajeText = document.getElementById("caracter")
        mensajeText.addEventListener("change", (e) => {
            if (e.target.value != "") {
                mensajeSelect.disabled = true;
            }
            else {
                mensajeSelect.disabled = false;
            }
        })
    </script>
    <script>
		function count(){
			document.getElementById("counter").textContent = document.getElementById("caracter").value.length;
            const dato=document.getElementById("counter").textContent            
            if(dato=="160"){
                document.getElementById("counter").textContent = "ya no hay espacio borrar caracteres"
            }else{
                document.getElementById("counter").textContent = document.getElementById("caracter").value.length;
            }            
		}		
		document.getElementById("caracter").addEventListener("input", count);
	</script>
     

<%- include("./Partes/Piedepag.ejs") %>